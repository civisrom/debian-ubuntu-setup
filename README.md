# üöÄ System Setup Script –¥–ª—è Debian –∏ Ubuntu

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–∞ –±–∞–∑–µ Debian 12 (Bookworm) –∏ Ubuntu 24.04 (Noble).

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ-–æ–ø—Ü–∏–∏)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–§–∞–π–ª—ã —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π](#-—Ñ–∞–π–ª—ã-—Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö-–∫–æ–ø–∏–π)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å SSH
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ SSH –ø–æ—Ä—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `AllowUsers` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π `sshd_config`

### üêç Python –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è Python 3
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/root/scripts`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:
  - requests, psutil, pytz, uvloop
  - python-telegram-bot (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π job-queue)
  - aiohttp, nest_asyncio
  - maxminddb, geoipsets
  - passlib, bcrypt
  - tqdm, colorama, humanize, termcolor, rich
  - –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ

### üê≥ Docker
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ Docker –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ Docker

### üî• Firewall (UFW)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª UFW
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ SSH –ø–æ—Ä—Ç–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ—Ä—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Docker —á–µ—Ä–µ–∑ **ufw-docker**

### üõ†Ô∏è ufw-docker
- **–û—Ç–¥–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç Docker
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UFW —Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- –ó–∞—â–∏—Ç–∞ Docker –æ—Ç –æ–±—Ö–æ–¥–∞ –ø—Ä–∞–≤–∏–ª UFW

### ‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã (sysctl)
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ IPv6
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TCP BBR congestion control
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ TCP –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ inotify

### üì¶ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
#### Debian 12
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (main, contrib, non-free, non-free-firmware)
- Security updates
- Stable updates
- Backports

#### Ubuntu 24.04
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ `/etc/apt/sources.list.d/ubuntu.list`
- Main, Restricted, Universe, Multiverse
- Security Updates
- Updates
- Backports
- Partner Repository (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω)

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç:
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: htop
- **–°–µ—Ç—å**: curl, wget, net-tools, traceroute
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: ufw, iptables, auditd
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: git, build-essential, python3, python3-venv
- **–£—Ç–∏–ª–∏—Ç—ã**: nano, mc, jq, rsyslog, cron
- **–°–∏—Å—Ç–µ–º–∞**: systemd, sudo, manpages
- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ...

### üì® Custom MOTD
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ Message of the Day
- –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è Debian –∏–ª–∏ Ubuntu

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Debian 12 (Bookworm) –∏–ª–∏ Ubuntu 24.04 (Noble)
- **–ü—Ä–∞–≤–∞**: root –¥–æ—Å—Ç—É–ø
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç**: —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- **–ú–µ—Å—Ç–æ**: –º–∏–Ω–∏–º—É–º 1 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∑–∞–ø—É—Å–∫
bash <(wget -qO- https://raw.githubusercontent.com/civisrom/debian-ubuntu-setup/main/install.sh)

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é curl
bash <(curl -fsSL https://raw.githubusercontent.com/civisrom/debian-ubuntu-setup/main/install.sh)

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
wget https://raw.githubusercontent.com/civisrom/debian-ubuntu-setup/refs/heads/main/system-setup.sh

# –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x system-setup.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo ./system-setup.sh
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
sudo bash system-setup.sh
```

–°–∫—Ä–∏–ø—Ç –∑–∞–¥–∞—Å—Ç —Å–µ—Ä–∏—é –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –∂–µ–ª–∞–µ–º–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –≤—ã–≤–µ–¥–µ—Ç summary –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

### –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º

```bash
# –ß–µ—Ä–µ–∑ pipe
echo "y" | sudo bash system-setup.sh

# –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
sudo bash system-setup.sh < /dev/null
```

–í –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- SSH: –ù–ï–¢
- Python venv: –ù–ï–¢
- Docker: –ù–ï–¢
- ufw-docker: –ù–ï–¢
- UFW: –î–ê
- sysctl: –î–ê
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: –î–ê
- MOTD: –ù–ï–¢

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏

### 1. SSH Configuration

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ SSH

```
Configure SSH? (y/N): y
Enter new SSH port (default 22): 2222
Enter usernames for AllowUsers (space-separated):
AllowUsers: admin user1 deploy
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ú–µ–Ω—è–µ—Ç –ø–æ—Ä—Ç SSH –≤ `/etc/ssh/sshd_config`
- –î–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É `AllowUsers` —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç SSH —Å–µ—Ä–≤–∏—Å

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ω–∏—Ö!

### 2. Python Virtual Environment

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è Python –ø—Ä–æ–µ–∫—Ç–æ–≤

```
Create Python venv? (y/N): y
Enter path for virtual environment (default: /root/skripts): /opt/myproject
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –°–æ–∑–¥–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –û–±–Ω–æ–≤–ª—è–µ—Ç pip
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –ø–∞–∫–µ—Ç–æ–≤

**–ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
```bash
source /opt/myproject/bin/activate
```

### 3. Docker Installation

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```
Install Docker? (y/N): y
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç Docker
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker Engine –∏ Docker Compose
- –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏ –≤–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker

### 4. ufw-docker

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

```
Install ufw-docker? (y/N): y
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç ufw-docker —É—Ç–∏–ª–∏—Ç—É
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é UFW –∏ Docker

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
ufw-docker allow container_name port

# –ü—Ä–∏–º–µ—Ä
ufw-docker allow nginx 80/tcp
```

### 5. UFW Firewall

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –±–∞–∑–æ–≤–æ–π –∑–∞—â–∏—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

```
Configure UFW? (Y/n): y
Port <SSH_PORT> (SSH) will be allowed automatically
Enter additional port to allow: 80
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (deny incoming, allow outgoing)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SSH –ø–æ—Ä—Ç
- –†–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç firewall

### 6. System Optimization (sysctl)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

```
Configure sysctl? (Y/n): y
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –û—Ç–∫–ª—é—á–∞–µ—Ç IPv6
- –í–∫–ª—é—á–∞–µ—Ç TCP BBR (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ç–µ–≤—ã–µ –±—É—Ñ–µ—Ä—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç TCP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ª–∏–º–∏—Ç—ã —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å BBR
sysctl net.ipv4.tcp_congestion_control

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
sysctl -a | grep -E "net.ipv4|net.core"
```

### 7. Repository Configuration

#### Debian
```
Configure repositories? (Y/n): y
```
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `/etc/apt/sources.list` —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

#### Ubuntu
```
Configure repositories? (Y/n): y
```
–°–æ–∑–¥–∞–µ—Ç `/etc/apt/sources.list.d/ubuntu.list` –∏ –æ—á–∏—â–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π `sources.list`.

### 8. Custom MOTD

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –î–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ

```
Install MOTD? (y/N): y
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**:
- –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π MOTD
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

```bash
sudo bash system-setup.sh
```

–í—ã–±–µ—Ä–∏—Ç–µ:
- SSH: YES, Port: 2222, Users: admin
- Python venv: NO
- Docker: NO
- ufw-docker: NO
- UFW: YES, Additional port: 80 443
- sysctl: YES
- Repositories: YES
- MOTD: YES

### –ü—Ä–∏–º–µ—Ä 2: Docker —Ö–æ—Å—Ç

```bash
sudo bash system-setup.sh
```

–í—ã–±–µ—Ä–∏—Ç–µ:
- SSH: YES, Port: 2222, Users: admin deploy
- Python venv: NO
- Docker: YES
- ufw-docker: YES
- UFW: YES, Additional ports: –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- sysctl: YES
- Repositories: YES
- MOTD: YES

### –ü—Ä–∏–º–µ—Ä 3: Python —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
sudo bash system-setup.sh
```

–í—ã–±–µ—Ä–∏—Ç–µ:
- SSH: YES, Port: 2222, Users: developer
- Python venv: YES, Path: /home/developer/projects
- Docker: NO
- ufw-docker: NO
- UFW: YES
- sysctl: YES
- Repositories: YES
- MOTD: NO

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### SSH –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û**:

1. **–ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º SSH –ø–æ—Ä—Ç–∞**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–æ–≤—ã–π –ø–æ—Ä—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ firewall —Ä–∞–∑—Ä–µ—à–∏—Ç –Ω–æ–≤—ã–π –ø–æ—Ä—Ç
   - –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–µ–∫—É—â—É—é SSH —Å–µ—Å—Å–∏—é –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–≥–æ SSH –ø–æ—Ä—Ç–∞**:
   ```bash
   # –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—É—é —Å–µ—Å—Å–∏—é
   ssh -p 2222 user@your-server
   
   # –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —É –≤–∞—Å –µ—â–µ –æ—Ç–∫—Ä—ã—Ç–∞ —Å—Ç–∞—Ä–∞—è —Å–µ—Å—Å–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   ```

3. **AllowUsers**:
   - –£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–ª—é—á–∏/–ø–∞—Ä–æ–ª–∏
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

### UFW –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**:
   ```bash
   sudo ufw status verbose
   ```

2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ—Ä—Ç–æ–≤**:
   ```bash
   sudo ufw allow 8080/tcp comment 'My Application'
   ```

3. **–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª**:
   ```bash
   sudo ufw status numbered
   sudo ufw delete <number>
   ```

## üíæ –§–∞–π–ª—ã —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

| –§–∞–π–ª | –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è | –§–æ—Ä–º–∞—Ç |
|------|-----------------|--------|
| `/etc/ssh/sshd_config` | `/etc/ssh/sshd_config.backup.YYYYMMDD-HHMMSS` | Timestamp |
| `/etc/sysctl.conf` | `/etc/sysctl.conf.backup.YYYYMMDD-HHMMSS` | Timestamp |
| `/etc/apt/sources.list` | `/etc/apt/sources.list.backup.YYYYMMDD-HHMMSS` | Timestamp |
| `/etc/apt/sources.list.d/ubuntu.list` | `/etc/apt/sources.list.d/ubuntu.list.backup.YYYYMMDD-HHMMSS` | Timestamp |

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

```bash
# –ü—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo cp /etc/ssh/sshd_config.backup.20250128-143022 /etc/ssh/sshd_config
sudo systemctl restart ssh

# –ü—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è sysctl
sudo cp /etc/sysctl.conf.backup.20250128-143022 /etc/sysctl.conf
sudo sysctl -p
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### SSH –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: SSH —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ–≤–∞–ª–∏–¥–Ω–∞

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo sshd -t

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫–∏
sudo journalctl -xeu ssh

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
sudo cp /etc/ssh/sshd_config.backup.* /etc/ssh/sshd_config
sudo systemctl restart ssh
```

### –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Ä—Ç –∏–∑–º–µ–Ω–∏–ª—Å—è, –Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ UFW:
   ```bash
   sudo ufw status | grep <–Ω–æ–≤—ã–π_–ø–æ—Ä—Ç>
   ```

2. –ï—Å–ª–∏ –ø–æ—Ä—Ç –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω:
   ```bash
   sudo ufw allow <–Ω–æ–≤—ã–π_–ø–æ—Ä—Ç>/tcp
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–ª—É—à–∞–µ—Ç –ª–∏ SSH –Ω–æ–≤—ã–π –ø–æ—Ä—Ç:
   ```bash
   sudo ss -tlnp | grep ssh
   ```

### Python –ø–∞–∫–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Python –ø–∞–∫–µ—Ç–æ–≤ –≤ venv

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source /path/to/venv/bin/activate

# –û–±–Ω–æ–≤–∏—Ç—å pip
pip install --upgrade pip

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã –ø–æ –æ–¥–Ω–æ–º—É
pip install requests
pip install psutil
# –∏ —Ç.–¥.
```

### Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status docker

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
sudo journalctl -xeu docker

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart docker

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é
docker --version
```

### ufw-docker –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞**: ufw-docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–æ –∫–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
which ufw-docker
ls -la /usr/local/bin/ufw-docker

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo wget -O /usr/local/bin/ufw-docker \
  https://github.com/chaifeng/ufw-docker/raw/master/ufw-docker
sudo chmod +x /usr/local/bin/ufw-docker
sudo ufw-docker install
```

### –°–∫—Ä–∏–ø—Ç –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –û–°

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∫—Ä–∏–ø—Ç –ø—Ä–æ—Å–∏—Ç –≤—ã–±—Ä–∞—Ç—å –û–° –≤—Ä—É—á–Ω—É—é

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞:
   ```bash
   cat /etc/os-release
   ```

2. –ï—Å–ª–∏ —Ñ–∞–π–ª –µ—Å—Ç—å, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –û–° –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º –º–µ–Ω—é

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è:
   - Debian 12 (Bookworm)
   - Ubuntu 24.04 (Noble)

## üìä –ß—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (–æ–±–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞)

```
htop, wget, curl, git, nano, mc
ufw, iptables, auditd
net-tools, traceroute, apache2-utils
sqlite3, jq, rsyslog, cron
python3, python3-venv, build-essential
gnupg2, ca-certificates, lsb-release
sudo, manpages, systemd
pwgen, apg, makepasswd
–∏ –¥—Ä—É–≥–∏–µ...
```

### Python –ø–∞–∫–µ—Ç—ã (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ)

```
requests, psutil, pytz, uvloop
aiohttp, nest_asyncio
python-telegram-bot[job-queue]
charset-normalizer, maxminddb, geoipsets
passlib, bcrypt
tqdm, colorama, humanize, termcolor, rich
urllib3, chardet
setuptools, wheel, pip
–∏ –¥—Ä—É–≥–∏–µ...
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã**:
   ```bash
   sudo reboot
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ SSH**:
   - –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏ –ø–æ—Ä—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –Ω–æ–≤–æ–≥–æ –ø–æ—Ä—Ç–∞
   - –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é –¥–æ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ UFW**:
   ```bash
   sudo ufw status verbose
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ sysctl**:
   ```bash
   sysctl net.ipv4.tcp_congestion_control
   # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: bbr
   ```

5. **Docker –≥—Ä—É–ø–ø–∞**:
   - –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã docker
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
   groups
   # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≥—Ä—É–ø–ø–∞ docker
   ```

6. **Python venv**:
   ```bash
   source /path/to/venv/bin/activate
   pip list
   ```

## üõ°Ô∏è –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ.

---

‚≠ê **–ï—Å–ª–∏ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥–æ—á–∫—É –Ω–∞ GitHub!**
